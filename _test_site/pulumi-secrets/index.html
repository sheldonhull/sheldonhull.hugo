

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noodp" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <title>Pulumi Secrets - sheldonhull.com</title><meta name="Description" content="A personal dev blog"><meta property="og:title" content="Pulumi Secrets" />
<meta property="og:description" content="Really appreciate the slick handling for stack level encrypted secrets." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sheldonhull.com/pulumi-secrets/" /><meta property="og:image" content="https://www.sheldonhull.com/images/sheldon-avatar.jpg" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-11T23:49:22+00:00" />
<meta property="article:modified_time" content="2025-06-28T13:45:36-05:00" />
<meta property="og:see_also" content="https://www.sheldonhull.com/the-pulumi-verdict-so-far/" /><meta property="og:see_also" content="https://www.sheldonhull.com/using-randomization-for-pulumi-kubernetes-resources/" /><meta property="og:see_also" content="https://www.sheldonhull.com/remove-pending-operations-from-pulumi-state/" /><meta property="og:see_also" content="https://www.sheldonhull.com/pulumi-round-2/" /><meta property="og:see_also" content="https://www.sheldonhull.com/first-pass-with-pulumi/" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://www.sheldonhull.com/images/sheldon-avatar.jpg" /><meta name="twitter:title" content="Pulumi Secrets"/>
<meta name="twitter:description" content="Really appreciate the slick handling for stack level encrypted secrets."/>
<meta name="twitter:site" content="@sheldon_hull"/>
<meta name="application-name" content="sheldonhull.com">
<meta name="apple-mobile-web-app-title" content="sheldonhull.com">

<meta name="theme-color" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><meta name="twitter:creator" content="@sheldon_hull" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<link rel="canonical" href="https://www.sheldonhull.com/pulumi-secrets/" /><link rel="prev" href="https://www.sheldonhull.com/night-owl-for-slack/" /><link rel="next" href="https://www.sheldonhull.com/remove-pending-operations-from-pulumi-state/" />
<link rel="stylesheet" href="/css/main.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">{"@context": "https://schema.org","@type": "BlogPosting",
        "headline": "Pulumi Secrets",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://www.sheldonhull.com/pulumi-secrets/"
        },"image": ["https://www.sheldonhull.com/images/sheldon-avatar.jpg"],"genre": "posts","keywords":["tech","development","pulumi","go"],"wordcount":  1102 ,
        "url": "https://www.sheldonhull.com/pulumi-secrets/","datePublished": "2022-03-11T23:49:22+00:00","dateModified": "2025-06-28T13:45:36-05:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "https://www.sheldonhull.com/images/sheldon-avatar.jpg"},"author": {
                "@type": "Person",
                "name": "Author",
                "url": "/"
            },"description": ""
    }</script>
    

  
<script src="/jslibs/turbo/v7/index.75da65174eac2f7420dfff4e943b2459d6557d149518d5f6162d08d48842b1e8.js"  integrity="sha256-ddplF06sL3Qg3/9OlDskWdZVfRSVGNX2Fi0I1IhCseg="  defer></script>

        <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "2b4de99e93dc485baaf20c6dffaf78a0"}'></script>
        <link rel="webmention" href="https://webmention.io/www.sheldonhull.com/webmention" />
        <link rel="pingback" href="https://webmention.io/www.sheldonhull.com/xmlrpc" />

    

    <a class="h-card" rel="me" href="https://www.sheldonhull.com/"></a>



</head>
    
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop print:!tw-hidden" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="sheldonhull.com"><img
        class="logo"
        loading="lazy"
        src="/images/sheldon-avatar.jpg"
        srcset="/images/sheldon-avatar.jpg, /images/sheldon-avatar.jpg 1.5x, /images/sheldon-avatar.jpg 2x"
        title="/images/sheldon-avatar.jpg" height="36"   width="36" ><span class="header-title-pre"><span id="logo-anima"><span class="arrow">></span><span class="dash">_</span></span></span><span id="desktop-header-typeit" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item"
                    href="/posts" > posts </a><a class="menu-item"
                    href="/archive" > archive </a><a class="menu-item"
                    href="/about/" > about </a><a class="menu-item"
                    href="/notes/" > notes </a><a class="menu-item"
                    href="/creative/" > creative </a><a class="menu-item"
                    href="/tags/" > tags </a><a class="menu-item"
                    href="https://github.com/sheldonhull/"  title="GitHub" 
                    rel="noopener noreferrer" target="_blank" ><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                    <input type="text"
                        placeholder="Search titles or contents..."
                        id="search-input-desktop">
                    <button class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                        <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
                    </button>
                    <button class="search-button search-clear" id="search-clear-desktop" title="Clear">
                        <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>
                    </button>
                    <span class="search-button search-loading tw-animate-spin" id="search-loading-desktop">
                        <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"/></svg>
                    </span>
                </span><button class="menu-item theme-switch" aria-label="Switch Theme">
                    <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705 0 184 82.311 184 184 0 101.705-82.311 184-184 184z"/></svg>
                </button></div>
        </div>
    </div>
</header><header class="mobile print:!tw-hidden" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="sheldonhull.com"><img
        class="logo"
        loading="lazy"
        src="/images/sheldon-avatar.jpg"
        srcset="/images/sheldon-avatar.jpg, /images/sheldon-avatar.jpg 1.5x, /images/sheldon-avatar.jpg 2x"
        title="/images/sheldon-avatar.jpg" ><span class="header-title-pre"><span id="logo-anima"><span class="arrow">></span><span class="dash">_</span></span></span><span id="mobile-header-typeit" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                <div class="search mobile" id="search-mobile">
                    <input type="text"
                        placeholder="Search titles or contents..."
                        id="search-input-mobile">
                    <button class="search-button search-toggle tw-h-10" id="search-toggle-mobile" title="Search">
                        <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
                    </button>
                    <button class="search-button search-clear" id="search-clear-mobile" title="Clear">
                        <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>
                    </button>
                    <span class="search-button search-loading tw-animate-spin" id="search-loading-mobile">
                        <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"/></svg>
                    </span>
                </div>
                <button class="search-cancel" id="search-cancel-mobile">
                    Cancel
                </button>
            </div><a class="menu-item" href="/posts" title="" >posts</a><a class="menu-item" href="/archive" title="" >archive</a><a class="menu-item" href="/about/" title="" >about</a><a class="menu-item" href="/notes/" title="" >notes</a><a class="menu-item" href="/creative/" title="" >creative</a><a class="menu-item" href="/tags/" title="" >tags</a><a class="menu-item" href="https://github.com/sheldonhull/" title="GitHub" 
                rel="noopener noreferrer" target="_blank" ><i class='fab fa-github fa-fw'></i></a><button class="menu-item theme-switch tw-w-full" aria-label="Switch Theme">
                <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705 0 184 82.311 184 184 0 101.705-82.311 184-184 184z"/></svg>
            </button></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div><main class="main">
                <div class="container"><article class="page single h-entry"><h1 class="single-title animated flipInX p-name">Pulumi Secrets</h1><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><a href="/" title="Author" rel=" author" class="author">Author</a>
       </span></div>
      <div class="post-meta-line">
        <a
          rel="author"
          class="p-author h-card"
          style="display: none;"
          ref="https://www.sheldonhull.com/"
        >
          
        </a>
        <span class="u-url" style="display: none;">https://www.sheldonhull.com/pulumi-secrets/</span>
        <span class="dt-published" style="display: none;">
          2022-03-11T23:49:22Z
        </span><i class="far fa-calendar-alt fa-fw"></i>
          &nbsp;
          <time datetime="2022-03-11">2022-03-11</time>
          &nbsp;<i class="fas fa-pencil-alt fa-fw"></i>
        &nbsp;1102 words&nbsp;
        <i class="far fa-clock fa-fw"></i>
        &nbsp;6 minutes&nbsp;</div>
    </div>
    

  <div id="series-section">
    
    
    <div id="series-section">
      <hr/>
        
        <p>
          <a href="" id="series"></a>
          <div style="font-size:1.4em">
            <b>pulumi</b>
            <i> series</i>
            <br/>
          </div>
        </p>

        
        
        <table style="border:0px; max-width: 80%;margin-bottom:1em;" class="series">
            

                
                <tr>
                    <td style="width:40%; border:0px; text-overflow: ellipsis;"; border:0px;>Apr 12, 2022</td>
                    <td style="width:60%; border:0px; text-overflow: ellipsis;">
                      <a href="https://www.sheldonhull.com/the-pulumi-verdict-so-far/">The Pulumi Verdict So Far</a>
                    </td>
                </tr>
                

            

                
                <tr>
                    <td style="width:40%; border:0px; text-overflow: ellipsis;"; border:0px;>Mar 24, 2022</td>
                    <td style="width:60%; border:0px; text-overflow: ellipsis;">
                      <a href="https://www.sheldonhull.com/using-randomization-for-pulumi-kubernetes-resources/">Using Randomization for Pulumi Kubernetes Resources</a>
                    </td>
                </tr>
                

            

                
                <tr>
                    <td style="width:40%; border:0px; text-overflow: ellipsis;"; border:0px;>Mar 24, 2022</td>
                    <td style="width:60%; border:0px; text-overflow: ellipsis;">
                      <a href="https://www.sheldonhull.com/remove-pending-operations-from-pulumi-state/">Remove Pending Operations From Pulumi State</a>
                    </td>
                </tr>
                

            

                
                <tr>
                    <td style="width:40%; border:0px; text-overflow: ellipsis;">Mar 11, 2022</td>
                    <td style="width:60%; border:0px; text-overflow: ellipsis;">
                     <a href="https://www.sheldonhull.com/pulumi-secrets/">Pulumi Secrets</a>
                   </td>
                </tr>
                

            

                
                <tr>
                    <td style="width:40%; border:0px; text-overflow: ellipsis;"; border:0px;>Jan 28, 2022</td>
                    <td style="width:60%; border:0px; text-overflow: ellipsis;">
                      <a href="https://www.sheldonhull.com/pulumi-round-2/">Pulumi Round 2</a>
                    </td>
                </tr>
                

            

                
                <tr>
                    <td style="width:40%; border:0px; text-overflow: ellipsis;"; border:0px;>Aug 10, 2021</td>
                    <td style="width:60%; border:0px; text-overflow: ellipsis;">
                      <a href="https://www.sheldonhull.com/first-pass-with-pulumi/">First Pass With Pulumi</a>
                    </td>
                </tr>
                

            
        </table>
        <hr/>
        <br/>
  </div>
  


<div class="content e-content" id="content"><h2 id="chicken-or-the-egg" class="headerLink">
    <a href="#chicken-or-the-egg" class="header-mark"></a>Chicken or The Egg</h2><p>Secrets with infrastructure are a problem.</p>
<ul>
<li>I want to source control my secrets, and deploy via CD.</li>
<li>I want to use infrastructure-as-code to define my configuration, including secrets.</li>
</ul>
<p>But I don&rsquo;t want to expose the values at any stage during this.
I want to keep them in a secret store, and only expose them when I need them, but I still want to manage them via code.</p>
<p>For a while I&rsquo;ve done a blend of loading local environment variables or creating manually in a vault, and then using in other ways.</p>
<p>Terraform makes this tricky IMO, as if you want to create a secret like an Azure DevOps library variable, SSM parameter, or other value, you need to go and add this into Terraform cloud as a secret value, use a third party cli that helps do this for you, or some other work around.</p>
<h2 id="other-alternatives" class="headerLink">
    <a href="#other-alternatives" class="header-mark"></a>Other alternatives</h2><p>There are tools that allow you to encrypt your files in git, but it adds another layer of complexity, and often isn&rsquo;t cross-platform compatible.</p>
<h2 id="pulumi-secret-encryption" class="headerLink">
    <a href="#pulumi-secret-encryption" class="header-mark"></a>Pulumi Secret Encryption</h2><p>Pulumi&rsquo;s solution seems like a non-brainer ingenious way to solve this.</p>
<p>When using their remote state storage, you can use the cli to easily flag a value as a secret, and the value is encrypted in your yaml configuration (you can configure one outside of the yaml too if you wish I think).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">pulumi config <span class="nb">set</span> --secret --secret-key<span class="o">=</span>my-secret-key my-secret-value
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="some-practical-examples" class="headerLink">
    <a href="#some-practical-examples" class="header-mark"></a>Some Practical Examples</h2><p>I wanted to embed some encrypted kubeconfigs for designated clusters to do deployments.</p>
<p>Assuming you have a directory of some service account kubeconfigs, you could run this shell script and add encrypted configurations for each of your clusters that pulumi could then read.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">pulumicwd</span><span class="o">=</span>pulumi/myfancyproject
</span></span><span class="line"><span class="cl"><span class="nv">pulumistack</span><span class="o">=</span>myfancyproject/dev
</span></span><span class="line"><span class="cl"><span class="nv">ClusterIndex</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> i in <span class="k">$(</span>ls .mykubeconfigs/kubeconfig-svc-account--*.yaml<span class="k">)</span><span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s2">&#34;Processing </span><span class="nv">$i</span><span class="s2">: ClusterIndex: </span><span class="nv">$ClusterIndex</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">kubecontent</span><span class="o">=</span><span class="k">$(</span>cat <span class="nv">$i</span> <span class="p">|</span> gojq --compact-output --yaml-input<span class="k">)</span>
</span></span><span class="line"><span class="cl">  <span class="nv">clustername</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$kubecontent</span> <span class="p">|</span> gojq <span class="s1">&#39;.clusters[0].name&#39;</span> --raw-output<span class="k">)</span>
</span></span><span class="line"><span class="cl">  pulumi --cwd <span class="nv">$pulumicwd</span> --stack <span class="nv">$pulumistack</span> config <span class="nb">set</span> --path <span class="s2">&#34;clusters[</span><span class="si">${</span><span class="nv">ClusterIndex</span><span class="si">}</span><span class="s2">].name&#34;</span>  <span class="nv">$clustername</span>
</span></span><span class="line"><span class="cl">  cat <span class="nv">$i</span> <span class="p">|</span> gojq --compact-output --yaml-input <span class="p">|</span> pulumi --cwd <span class="nv">$pulumicwd</span> --stack <span class="nv">$pulumistack</span> config <span class="nb">set</span> --secret --path <span class="s2">&#34;clusters[</span><span class="si">${</span><span class="nv">ClusterIndex</span><span class="si">}</span><span class="s2">].kubeconfig&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">ClusterIndex</span><span class="o">=</span><span class="k">$((</span>ClusterIndex+1<span class="k">))</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;All done, the magic has been done, toast your kubeconfigs and send Sheldon a coffee. ☕ (and copilot for helping write this so quickly)&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>This would result in the following pulumi yaml being part of your stack:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">config</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">myfancyproject:clusters</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">clustername</span><span class="p">:</span><span class="w"> </span><span class="l">clusteeeeergobrrrr01</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">kubeconfig</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">secure</span><span class="p">:</span><span class="w"> </span><span class="l">mumbojumbencryptedtexthere</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">clustername</span><span class="p">:</span><span class="w"> </span><span class="l">clusteeeeergobrrrr02</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">kubeconfig</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">secure</span><span class="p">:</span><span class="w"> </span><span class="l">mumbojumbencryptedtexthere</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="consuming-this-in-go" class="headerLink">
    <a href="#consuming-this-in-go" class="header-mark"></a>Consuming This in Go</h2><p>What&rsquo;s cool is it&rsquo;s so freaking easy to work with it still in Pulumi.
Since the encryption is per stack, as long as you are in the right stack, and as long as you specify explicitly that the value you want to load is a secret, you can just work with it almost as usual.</p>
<p>In fact, all it takes is flipping <code>RequireObject</code> to <code>RequiredSecretObject</code>.</p>
<p>Not everything is easy in Pulumi&hellip; for sure, but they freaking nailed this.</p>
<h3 id="create-a-config-object" class="headerLink">
    <a href="#create-a-config-object" class="header-mark"></a>Create A Config Object</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Clusters</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Name</span>       <span class="kt">string</span> <span class="s">`json:&#34;name,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Kubeconfig</span> <span class="kt">string</span> <span class="s">`json:&#34;kubeconfig,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="use-structured-secret-configuration-in-pulumi-plan" class="headerLink">
    <a href="#use-structured-secret-configuration-in-pulumi-plan" class="header-mark"></a>Use Structured Secret Configuration In Pulumi Plan</h3><p>Now that we have a config object, use Pulumi&rsquo;s configuration package to load the config directly into a pointer to a struct.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> 	<span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="nx">kubernetes</span> <span class="s">&#34;github.com/pulumi/pulumi-kubernetes/sdk/v3/go/kubernetes&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">pulumi</span> <span class="s">&#34;github.com/pulumi/pulumi/sdk/v3/go/pulumi&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">config</span> <span class="s">&#34;github.com/pulumi/pulumi/sdk/v3/go/pulumi/config&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pulumi</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="o">*</span><span class="nx">pulumi</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">configClusters</span> <span class="o">:=</span> <span class="p">[]</span><span class="nx">Clusters</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// config.RequireObject(&#34;clusters&#34;, &amp;configClusters) // wouldn&#39;t give encrypted values, so we do the next line
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">config</span><span class="p">.</span><span class="nf">RequireSecretObject</span><span class="p">(</span><span class="s">&#34;clusters&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">configClusters</span><span class="p">)</span> <span class="c1">// wouldn&#39;t give encrypted values, so we do the next line
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">cluster</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">configClusters</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">_</span> <span class="p">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Log</span><span class="p">.</span><span class="nf">Info</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;starting up on cluster: %s... it go brrrr&#34;</span><span class="p">,</span> <span class="nx">cluster</span><span class="p">.</span><span class="nx">Name</span><span class="p">),</span> <span class="o">&amp;</span><span class="nx">pulumi</span><span class="p">.</span><span class="nx">LogArgs</span><span class="p">{})</span>
</span></span><span class="line"><span class="cl">      <span class="nx">pargs</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">kubernetes</span><span class="p">.</span><span class="nx">ProviderArgs</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">      <span class="nx">pargs</span><span class="p">.</span><span class="nx">Kubeconfig</span> <span class="p">=</span> <span class="nx">cluster</span><span class="p">.</span><span class="nx">Kubeconfig</span>
</span></span><span class="line"><span class="cl">      <span class="nx">myProvider</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">kubernetes</span><span class="p">.</span><span class="nf">NewProvider</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="s">&#34;k8&#34;</span><span class="p">,</span> <span class="nx">pargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// now pass this myProvider to resources as the provider to use.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Passing the provider is done per resources like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">appsv1</span><span class="p">.</span><span class="nf">NewDeployment</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="nx">ctx</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;my-deployment-name&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="o">&amp;</span><span class="nx">appsv1</span><span class="p">.</span><span class="nx">DeploymentArgs</span><span class="p">{},</span>
</span></span><span class="line"><span class="cl">	<span class="nx">pulumi</span><span class="p">.</span><span class="nf">Provider</span><span class="p">(</span><span class="nx">prov</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="security-is-per-stack" class="headerLink">
    <a href="#security-is-per-stack" class="header-mark"></a>Security Is Per Stack</h2><p>Now&hellip; let&rsquo;s say you get worried about someone cloning this file and doing some devious with it.</p>
<p>They go along and generate a new yaml file, grab your encrypted values, use pulumi to decrypt and then go and drop your cluster.</p>
<p>Ain&rsquo;t gonna happen.
The paranoid part of my DevOpsy brain thinks like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">error: failed to decrypt encrypted configuration value &#39;cluster:kubeconfig&#39;: [400] Message authentication failed
</span></span><span class="line"><span class="cl">This can occur when a secret is copied from one stack to another. Encryption of secrets is done per-stack and
</span></span><span class="line"><span class="cl">it is not possible to share an encrypted configuration value across stacks.
</span></span></code></pre></td></tr></table>
</div>
</div><p>To me this felt like a failure I really was happy to see. Thank you Pulumi!</p>
<p>Best part is no freaking <code>echo $val | base64 -d</code>&hellip; <code>&lt;looking at you kubernetes secret values&gt;</code>.</p>
<h2 id="side-note-on-configuration" class="headerLink">
    <a href="#side-note-on-configuration" class="header-mark"></a>Side Note On Configuration</h2><p>I used a more complex config struct for the main naming convention enforcement and it worked great to simplify naming consistency.
Might do an article on this sometime if anyone finds it useful.</p>
<p>Example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// ServiceDeployName returns a string formatted like `myapi-dev-myapp-{SUFFIX}` where suffix is provided on call.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">d</span> <span class="o">*</span><span class="nx">SvcConfig</span><span class="p">)</span> <span class="nf">ServiceDeployName</span><span class="p">(</span><span class="nx">sharedConfig</span> <span class="o">*</span><span class="nx">SharedConfig</span><span class="p">,</span> <span class="nx">suffix</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">ToLower</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">		<span class="nx">strings</span><span class="p">.</span><span class="nf">Join</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="nx">d</span><span class="p">.</span><span class="nx">Rolename</span><span class="p">,</span> <span class="nx">sharedConfig</span><span class="p">.</span><span class="nx">Environment</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Deployment</span><span class="p">,</span> <span class="nx">suffix</span><span class="p">},</span> <span class="s">&#34;-&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>This provided solid intellisense all the way through it and made it really easy to refactor naming all by updating my config package.</p>
<h2 id="disclaimer" class="headerLink">
    <a href="#disclaimer" class="header-mark"></a>Disclaimer</h2><p>I&rsquo;m a fan of role based access like AWS Role assumption, using limited generated access tokens, etc (see <a href="/simplify-aws-developer-security-with-leapp/" title="simplify-aws-developer-security-with-leapp" rel="">article on Leapp for a great example for local dev workflows</a>)</p>
<p>However, practically, you might have services or apps that you need to manage that the cost of setting all that up is very high, for example you do the majority of your work in AWS, but you have a development Kubernetes cluster and want to setup a limited service account to do some Gitpod stuff.
You use this service account for limited scope permissions for deployments only, and this might be a great case of just embedding the kubeconfig directly into a Pulumi plan.</p>
<p>Maybe you need your PAT embedded for a provider, now just add as an encrypted value to your stack and get work shipped.</p>
<p>Improve later with more robust handling, but this will cut down the overhead of getting infra-as-code for a lot of the smaller projects!</p>
<h2 id="futher-reading" class="headerLink">
    <a href="#futher-reading" class="header-mark"></a>Futher Reading</h2><ul>
<li><a href="https://www.pulumi.com/docs/intro/concepts/secrets/" target="_blank" rel="noopener noreferrer">Pulumi &amp; Secrets</a></li>
</ul>
<h2 id="tools-used-or-mentioned" class="headerLink">
    <a href="#tools-used-or-mentioned" class="header-mark"></a>Tools Used Or Mentioned</h2><ul>
<li><a href="https://www.pulumi.com/" target="_blank" rel="noopener noreferrer">Pulumi</a></li>
<li><a href="https://github.com/itchyny/gojq" target="_blank" rel="noopener noreferrer">Gojq</a></li>
<li><a href="https://copilot.github.com/" target="_blank" rel="noopener noreferrer">Copilot - It actually wrote 50% of the shell script example. I ❤️ Copilot</a></li>
<li><a href="https://linux.die.net/man/1/base64" target="_blank" rel="noopener noreferrer">base64 cli</a></li>
<li><a href="https://kubernetes.io/" target="_blank" rel="noopener noreferrer">Kubernetes</a></li>
<li><a href="https://www.pulumi.com/docs/intro/concepts/config/#structured-configuration" target="_blank" rel="noopener noreferrer">Pulumi Structured Configuration</a> &amp; associated Go Package: <a href="https://github.com/pulumi/pulumi/tree/master/sdk/go/pulumi/config" target="_blank" rel="noopener noreferrer">Config</a></li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2025-06-28&nbsp;<a class="git-hash" href="https://github.com/sheldonhull/sheldonhull.hugo/commit/8f8474ab283af2d826741988ccc4429dc8dc7ee4" target="_blank" title="commit by sheldonhull(sheldonhull@users.noreply.github.com) 8f8474ab283af2d826741988ccc4429dc8dc7ee4: feat(ai): create markdown.instructions.md" rel="noopener noreferrer">
                                    <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/></svg>8f8474a</a></span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line print:!tw-hidden">
            <div class="post-info-md"><span><a class="link-to-mardown" href=/pulumi-secrets/index.md target="_blank" rel="noopener noreferrer">Read markdown</a>
                    </span></div>
            <div class="post-info-share"><button title="Share on Twitter" data-sharer="twitter" data-url="https://www.sheldonhull.com/pulumi-secrets/" data-title="Pulumi Secrets" data-via="sheldon_hull" data-hashtags="tech,development,pulumi,go"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></button><button title="Share on Linkedin" data-sharer="linkedin" data-url="https://www.sheldonhull.com/pulumi-secrets/"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg></button></div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"/></svg>&nbsp;<a href="/tags/tech/">Tech</a>,&nbsp;<a href="/tags/development/">Development</a>,&nbsp;<a href="/tags/pulumi/">Pulumi</a>,&nbsp;<a href="/tags/go/">Go</a></section>
        <section class="print:!tw-hidden">
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav print:tw-hidden"><a href="/night-owl-for-slack/" class="prev" rel="prev" title="Night Owl for Slack"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"/></svg>Night Owl for Slack</a>
            <a href="/remove-pending-operations-from-pulumi-state/" class="next" rel="next" title="Remove Pending Operations From Pulumi State">Remove Pending Operations From Pulumi State<svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"/></svg></a></div>
</div>
<div id="comments"><script
  src="https://giscus.app/client.js"
  data-repo="sheldonhull/sheldonhull.hugo"
  data-repo-id="MDEwOlJlcG9zaXRvcnkxNzcyMzY0MTk="
  data-category="blog"
  data-category-id="DIC_kwDOCpBpw84B-j5B"
  data-mapping="og:title"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-theme="transparent_dark"
  crossorigin="anonymous"
  async
></script>

          <noscript>
                Please enable JavaScript to view the comments powered by <a href="https://utteranc.es/">Utterances</a>.
          </noscript></div>
</article></div>
            </main><footer class="footer">
    <div class="footer-container"><div class="footer-line">
        </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2013 -2025</span><span class="author" itemprop="copyrightHolder"
            >&nbsp;<a
              href="/"
              target="_blank"
              rel="noopener noreferrer"
              ></a
            ></span
          >&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreferrer" href="https://www.sheldonhull.com/license" target="_blank">CC BY-NC 4.0</a></span></div>
    </div>
      <br />
      <div style="display: flex; justify-content: center;">
        <img src="https://api.netlify.com/api/v1/badges/cc815d05-9008-4078-8e4f-bad42eb3281a/deploy-status" alt="Deployment status" />
      </div>
      <br /><div id="subscribe-footer">
  <form
    action="https://embed.mailbrew.com/api/form_subscribe"
    method="get"
    style="width: 100%; max-width: 340px; color: #dcdcdc; background: #090909; padding: 10px; border-radius: 7px"
    id="mailbrew-embed-form"
  >
    <a
      href="https://app.mailbrew.com/sheldonhull?aff=sheldonhull"
      target="_blank"
      rel="noopener noreferrer"
      style="display: flex; width: 100%; align-items: center; margin-bottom: 6px"
    >
      <img
        src="https://www.gravatar.com/avatar/b909e5a82474e9853ff6a6c6111cf0cf?s=100&amp;d=404&amp;r=g"
        style="width: 22px; height: 22px; border-radius: 22px; margin-right: 6px"
      />
      <span style="font-weight: 500; flex: 1 1 auto; min-width: 0">
        Sheldon Hull
      </span>
    </a>
    <p style="opacity: 0.75; margin-bottom: 4px">
      ⚡ A curated newsletter of my writing and other interesting posts. Mostly
      tech focused.
    </p>
    <div style="display: flex; width: 100%; margin-top: 12px">
      <input
        type="email"
        style="
        height: 32px;
        font-size: 14.5px;
        border-radius: 6px;
        appearance: none;
        padding: 0 8px;
        border: 1px solid rgba(120, 120, 120, 0.3);
        margin-right: 6px;
        flex: 1;
      "
        id="email"
        name="email"
        placeholder="Your email"
        value=""
      />
      <input type="hidden" name="id" value="Ce52fHROTfCr" />
      <button
        type="submit"
        style="
        height: 32px;
        font-size: 14.5px;
        border-radius: 6px;
        appearance: none;
        padding: 0 16px;
        border: none;
        flex: 0 0 auto;
        font-weight: 500;
        cursor: pointer;
        background: #f51616;
        color: white;
      "
      >
        Subscribe
      </button>
    </div>
    <p
      id="mailbrew-success-message"
      style="font-size: 13px; margin-top: 5px; color: green"
    ></p>
    <p
      id="mailbrew-error-message"
      style="font-size: 13px; margin-top: 5px; color: red"
    ></p>
    <a
      href="https://mailbrew.com/?ref=brew-embed&aff=sheldonhull"
      target="_blank"
      rel="noopener noreferrer"
      style="display: block; font-size: 13px; margin-top: 8px; color: rgba(220, 220, 220, 0.6)"
    >
      Made with
      <img
        src="https://www.sheldonhull.com/images/mailbrew-embed-logo.png"
        width="18px"
        height="18px"
        style="margin-bottom: -4px; margin-right: 2px"
      />
      Mailbrew
    </a>
  </form>
</div>
<br /><div>
  <a href="https://www.buymeacoffee.com/KO1AFL2gX" target="_blank">
    <img
      src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png"
      alt="Buy Me A Coffee"
      style="display: inline-block; text-align:center; height: 60px !important;width: 217px !important;"
    />
  </a>
</div>
</div>
  </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><div class="assets"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway&amp;display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material&#43;Icons&amp;display=swap"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{},"data":{"desktop-header-typeit":"sheldonhull.com","mobile-header-typeit":"sheldonhull.com"},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"algoliaAppID":"04HSGXXQD5","algoliaIndex":"sheldonhull.com","algoliaSearchKey":"a7ec2763a5d966a5b9f8d70b254bfb68","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"},"sharerjs":true,"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"desktop-header-typeit":["desktop-header-typeit"],"mobile-header-typeit":["mobile-header-typeit"]},"duration":-1,"speed":100}};</script><script
    src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"
    
  ></script><script
    src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"
    
  ></script><script
    src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"
    
  ></script><script
    src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"
    
  ></script><script
    src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.2/sharer.min.js"
    
  ></script><script
    src="https://cdn.jsdelivr.net/npm/typeit@7.0.4/dist/typeit.min.js"
    
  ></script><script
    src="/js/sidebar.js"
    
  ></script><script src="/js/mailbrew-html-embed-script.js" async></script><script src="//cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/timeago.js/4.0.2/timeago.min.js"></script><script
    src="/js/theme.min.js"
    
      defer
    
  ></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'UA-40198001-3', { 'anonymize_ip': true });
        </script><script
    src="https://www.googletagmanager.com/gtag/js?id=UA-40198001-3"
    async
  ></script></div>

    </body>
</html>