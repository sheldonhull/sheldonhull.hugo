

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noodp" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <title>shell - sheldonhull.com</title><meta name="Description" content="A personal dev blog"><meta property="og:title" content="shell" />
<meta property="og:description" content="A cheatsheet for some bash stuff. I really ♥️ pwsh&hellip; but acknowledge it&rsquo;s not everyone&rsquo;s cup of tea. This page helps me get by with being a terrible basher" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sheldonhull.com/notes/development/shell/shell/" /><meta property="og:image" content="https://www.sheldonhull.com/images/sheldon-avatar.jpg" /><meta property="article:section" content="notes" />
<meta property="article:published_time" content="2020-10-30T00:00:00+00:00" />
<meta property="article:modified_time" content="2025-06-28T13:45:36-05:00" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://www.sheldonhull.com/images/sheldon-avatar.jpg" /><meta name="twitter:title" content="shell"/>
<meta name="twitter:description" content="A cheatsheet for some bash stuff. I really ♥️ pwsh&hellip; but acknowledge it&rsquo;s not everyone&rsquo;s cup of tea. This page helps me get by with being a terrible basher"/>
<meta name="twitter:site" content="@sheldon_hull"/>
<meta name="application-name" content="sheldonhull.com">
<meta name="apple-mobile-web-app-title" content="sheldonhull.com">

<meta name="theme-color" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><meta name="twitter:creator" content="@sheldon_hull" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<link rel="canonical" href="https://www.sheldonhull.com/notes/development/shell/shell/" /><link rel="prev" href="https://www.sheldonhull.com/notes/development/kubernetes/kubernetes/" /><link rel="next" href="https://www.sheldonhull.com/notes/development/observability/observability/" />
<link rel="stylesheet" href="/css/main.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">{"@context": "https://schema.org","@type": "BlogPosting",
        "headline": "shell",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://www.sheldonhull.com/notes/development/shell/shell/"
        },"image": ["https://www.sheldonhull.com/images/sheldon-avatar.jpg"],"genre": "notes","keywords":["development","shell"],"wordcount":  2247 ,
        "url": "https://www.sheldonhull.com/notes/development/shell/shell/","datePublished": "2020-10-30T00:00:00+00:00","dateModified": "2025-06-28T13:45:36-05:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "https://www.sheldonhull.com/images/sheldon-avatar.jpg"},"author": {
                "@type": "Person",
                "name": "Author",
                "url": "/"
            },"description": ""
    }</script>
    

  
<script src="/jslibs/turbo/v7/index.75da65174eac2f7420dfff4e943b2459d6557d149518d5f6162d08d48842b1e8.js"  integrity="sha256-ddplF06sL3Qg3/9OlDskWdZVfRSVGNX2Fi0I1IhCseg="  defer></script>

        <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "2b4de99e93dc485baaf20c6dffaf78a0"}'></script>
        <link rel="webmention" href="https://webmention.io/www.sheldonhull.com/webmention" />
        <link rel="pingback" href="https://webmention.io/www.sheldonhull.com/xmlrpc" />

    

    <a class="h-card" rel="me" href="https://www.sheldonhull.com/"></a>



</head>
    
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop print:!tw-hidden" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="sheldonhull.com"><img
        class="logo"
        loading="lazy"
        src="/images/sheldon-avatar.jpg"
        srcset="/images/sheldon-avatar.jpg, /images/sheldon-avatar.jpg 1.5x, /images/sheldon-avatar.jpg 2x"
        title="/images/sheldon-avatar.jpg" height="36"   width="36" ><span class="header-title-pre"><span id="logo-anima"><span class="arrow">></span><span class="dash">_</span></span></span><span id="desktop-header-typeit" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item"
                    href="/posts" > posts </a><a class="menu-item"
                    href="/archive" > archive </a><a class="menu-item"
                    href="/about/" > about </a><a class="menu-item"
                    href="/notes/" > notes </a><a class="menu-item"
                    href="/creative/" > creative </a><a class="menu-item"
                    href="/tags/" > tags </a><a class="menu-item"
                    href="https://github.com/sheldonhull/"  title="GitHub" 
                    rel="noopener noreferrer" target="_blank" ><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                    <input type="text"
                        placeholder="Search titles or contents..."
                        id="search-input-desktop">
                    <button class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                        <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
                    </button>
                    <button class="search-button search-clear" id="search-clear-desktop" title="Clear">
                        <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>
                    </button>
                    <span class="search-button search-loading tw-animate-spin" id="search-loading-desktop">
                        <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"/></svg>
                    </span>
                </span><button class="menu-item theme-switch" aria-label="Switch Theme">
                    <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705 0 184 82.311 184 184 0 101.705-82.311 184-184 184z"/></svg>
                </button></div>
        </div>
    </div>
</header><header class="mobile print:!tw-hidden" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="sheldonhull.com"><img
        class="logo"
        loading="lazy"
        src="/images/sheldon-avatar.jpg"
        srcset="/images/sheldon-avatar.jpg, /images/sheldon-avatar.jpg 1.5x, /images/sheldon-avatar.jpg 2x"
        title="/images/sheldon-avatar.jpg" ><span class="header-title-pre"><span id="logo-anima"><span class="arrow">></span><span class="dash">_</span></span></span><span id="mobile-header-typeit" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                <div class="search mobile" id="search-mobile">
                    <input type="text"
                        placeholder="Search titles or contents..."
                        id="search-input-mobile">
                    <button class="search-button search-toggle tw-h-10" id="search-toggle-mobile" title="Search">
                        <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
                    </button>
                    <button class="search-button search-clear" id="search-clear-mobile" title="Clear">
                        <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>
                    </button>
                    <span class="search-button search-loading tw-animate-spin" id="search-loading-mobile">
                        <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"/></svg>
                    </span>
                </div>
                <button class="search-cancel" id="search-cancel-mobile">
                    Cancel
                </button>
            </div><a class="menu-item" href="/posts" title="" >posts</a><a class="menu-item" href="/archive" title="" >archive</a><a class="menu-item" href="/about/" title="" >about</a><a class="menu-item" href="/notes/" title="" >notes</a><a class="menu-item" href="/creative/" title="" >creative</a><a class="menu-item" href="/tags/" title="" >tags</a><a class="menu-item" href="https://github.com/sheldonhull/" title="GitHub" 
                rel="noopener noreferrer" target="_blank" ><i class='fab fa-github fa-fw'></i></a><button class="menu-item theme-switch tw-w-full" aria-label="Switch Theme">
                <svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705 0 184 82.311 184 184 0 101.705-82.311 184-184 184z"/></svg>
            </button></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div><main class="main">
                <div class="container"><div class="page-container"><div class="page single special notes"><h1 class="single-title animate__animated animate__pulse animate__faster">shell</h1>
<button id="sidebar-toggle" style="position: fixed; top: 40px; left: 20px; z-index: 1100;">
  <i class="fas fa-bars"></i> 
</button>


<div id="sidebar">
  <ul>
    
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
      
      
      
      
    
      
      
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
      
      
      
      
    
      
      
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
      
      
      
        
      
      
      
      
      
    
    
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  <li data-issection="1">
    <a href="/notes/development/powershell/" class="directory">powershell</a>
    
      <ul class="sub-menu">
        
          
          
            
            




  
  
    <li><a href="/notes/development/powershell/dbatools/" class="direct-page">dbatools</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/powershell/pester/" class="direct-page">Pester</a></li>
  

          
        
      </ul>
    
  </li>

      
  
      
        
        




  <li data-issection="1">
    <a href="/notes/development/ai/" class="directory">AI</a>
    
      <ul class="sub-menu">
        
          
          
            
            




  
  
    <li><a href="/notes/development/ai/chat/" class="direct-page">chat</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/ai/copilot/" class="direct-page">copilot</a></li>
  

          
        
      </ul>
    
  </li>

      
  
      
        
        




  
  

      
  
      
        
        




  <li data-issection="1">
    <a href="/notes/development/aws/" class="directory">AWS</a>
    
      <ul class="sub-menu">
        
          
          
            
            




  
  
    <li><a href="/notes/development/aws/aws-powershell/" class="direct-page">AWS PowerShell</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/aws/aws-cli/" class="direct-page">aws-cli</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/aws/s5cmd/" class="direct-page">Syncing Files Using S5Cmd</a></li>
  

          
        
      </ul>
    
  </li>

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  <li data-issection="1">
    <a href="/notes/development/azure/" class="directory">Azure</a>
    
      <ul class="sub-menu">
        
          
          
            
            




  
  
    <li><a href="/notes/development/azure/azure-cli/" class="direct-page">Azure CLI</a></li>
  

          
        
      </ul>
    
  </li>

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  <li data-issection="1">
    <a href="/notes/development/build-release-engineering/" class="directory">Build &amp; Release Engineering</a>
    
      <ul class="sub-menu">
        
          
          
            
            




  
  
    <li><a href="/notes/development/build-release-engineering/azure-pipelines/" class="direct-page">Azure Pipelines</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/build-release-engineering/renovate/" class="direct-page">renovate</a></li>
  

          
        
      </ul>
    
  </li>

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  <li data-issection="1">
    <a href="/notes/development/" class="directory">Development</a>
    
      <ul class="sub-menu">
        
          
          
            
            




  
  
    <li><a href="/notes/development/observability/observability/" class="direct-page">observability</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/shell/shell/" class="direct-page">shell</a></li>
  

          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            




  
  
    <li><a href="/notes/development/kubernetes/kubernetes/" class="direct-page">kubernetes</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/level-up/" class="direct-page">Level-Up</a></li>
  

          
        
          
          
        
      </ul>
    
  </li>

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  <li data-issection="1">
    <a href="/notes/development/front-end/" class="directory">Front-End</a>
    
      <ul class="sub-menu">
        
          
          
            
            




  
  
    <li><a href="/notes/development/front-end/yarn/" class="direct-page">Yarn</a></li>
  

          
        
      </ul>
    
  </li>

      
  
      
        
        




  <li data-issection="1">
    <a href="/notes/development/go/" class="directory">go</a>
    
      <ul class="sub-menu">
        
          
          
            
            




  
  
    <li><a href="/notes/development/go/go/" class="direct-page">go</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/go/code-coverage/" class="direct-page">Code Coverage</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/go/dagger/" class="direct-page">Dagger</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/go/effective-go/" class="direct-page">Effective Go</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/go/logging/" class="direct-page">Go Logging</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/go/modules/" class="direct-page">Go Modules</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/go/testing/" class="direct-page">Go Testing</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/go/goroutines/" class="direct-page">goroutines</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/go/http/" class="direct-page">HTTP</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/go/mage/" class="direct-page">Mage</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/go/pre-commit/" class="direct-page">Pre-Commit</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/go/using-go-tools/" class="direct-page">Using Go Tools</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/go/vscode-configuration-for-go/" class="direct-page">VSCode Configuration for Go</a></li>
  

          
        
      </ul>
    
  </li>

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  <li data-issection="1">
    <a href="/notes/" class="directory">notes</a>
    
      <ul class="sub-menu">
        
          
          
        
      </ul>
    
  </li>

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  <li data-issection="1">
    <a href="/notes/development/tooling/" class="directory">tooling</a>
    
      <ul class="sub-menu">
        
          
          
            
            




  
  
    <li><a href="/notes/development/tooling/precommit/" class="direct-page">precommit</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/tooling/docker/" class="direct-page">docker</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/tooling/git/" class="direct-page">git</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/tooling/task/" class="direct-page">task</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/tooling/aqua/" class="direct-page">aqua</a></li>
  

          
        
          
          
            
            




  
  
    <li><a href="/notes/development/tooling/direnv/" class="direct-page">direnv</a></li>
  

          
        
      </ul>
    
  </li>

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
      
        
        




  
  

      
  
  </ul>
</div><div class="content" id="content"><p>This is a mix of shell, linux, and macOS commands.
Comments are welcome with any corrections or suggestions.</p>
<h2 id="cli-usage" class="headerLink">
    <a href="#cli-usage" class="header-mark"></a>CLI Usage</h2><h3 id="powershell--bash-comparison" class="headerLink">
    <a href="#powershell--bash-comparison" class="header-mark"></a>PowerShell &amp; Bash Comparison</h3><h4 id="brevity" class="headerLink">
    <a href="#brevity" class="header-mark"></a>Brevity</h4><p>See all aliases with <code>Get-Alias</code> and to expedite your CLI usage you could use a gist like this: <a href="https://gist.github.com/JustinGrote/3eeec61472da1aa9f86a8f746eac905f" target="_blank" rel="noopener noreferrer">Aliaser.ps1</a>.</p>
<p>Note that PowerShell eschews brevity for clarity, but you can alias anything you like to be nearly as succinct as bash commands.</p>
<blockquote>
<p>IMO readability/brevity trumps succinctness. However for interactive terminal usage, aliasing can be a great tool. Use VSCode to auto-expand aliases into fully qualified functions if you decide to turn your adhoc work into a script file.</p>
</blockquote>
<p>Using <code>pushd</code> in a PowerShell session actually aliases to <code>Push-Location</code>.
This pushes the location into a stack for later retrieval.</p>
<h4 id="powershell-works-with-native-tooling" class="headerLink">
    <a href="#powershell-works-with-native-tooling" class="header-mark"></a>PowerShell Works With Native Tooling</h4><p>I&rsquo;ve included the similar PowerShell command to help those jumping between multiple shells.</p>
<p>Please note that unlike Python, PowerShell works as a terminal with native tools + scripting language.</p>
<p>You can use <code>pwsh</code> in almost every case on Linux &amp; macOS and use the same tools you prefer, while being able to execute PowerShell commands as well.</p>
<p>For example, something like AWS CLI returning JSON could be automatically unmarshaled into an object instead of using <code>jq</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="p">&amp;</span> <span class="p">(</span><span class="n">aws</span> <span class="n">ec2</span> <span class="nb">describe-instances</span> <span class="p">|</span> <span class="nb">ConvertFrom-Json</span><span class="p">).</span><span class="py">Instances</span><span class="p">.</span><span class="py">InstanceId</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Another example is paths.</p>
<p>Prerequiresites for the PowerShell examples:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nb">Install-Module</span> <span class="n">Microsoft</span><span class="p">.</span><span class="py">PowerShell</span><span class="p">.</span><span class="py">ConsoleGuiTools</span> <span class="n">-Scope</span> <span class="n">CurrentUser</span> <span class="n">-Force</span>
</span></span></code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th>Command</th>
<th>shell</th>
<th>pwsh</th>
</tr>
</thead>
<tbody>
<tr>
<td>View history</td>
<td><code>history</code></td>
<td><code>Get-History</code></td>
</tr>
<tr>
<td>Execute Line from History</td>
<td><code>!Number</code></td>
<td>`Invoke-Expression (Get-History</td>
</tr>
<tr>
<td>Execute Last Command With Sudo</td>
<td><code>sudo !!</code></td>
<td></td>
</tr>
<tr>
<td>Check if a file exists</td>
<td><code>test -f ./filename</code></td>
<td><code>Test-Path $filename -PathType Leaf</code> or <code>[io.file]::exists($filename)</code></td>
</tr>
</tbody>
</table>
<h2 id="installation" class="headerLink">
    <a href="#installation" class="header-mark"></a>Installation</h2><h3 id="common-app-installs" class="headerLink">
    <a href="#common-app-installs" class="header-mark"></a>Common App Installs</h3><table>
<thead>
<tr>
<th>Application</th>
<th>Notes</th>
<th>Install Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>HomeBrew</td>
<td>Works on Linux and macOS now 👏.</td>
<td><code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)&quot;</code></td>
</tr>
</tbody>
</table>
<h3 id="ansible-initialization" class="headerLink">
    <a href="#ansible-initialization" class="header-mark"></a>Ansible Initialization</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/env bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>sh -c <span class="s2">&#34;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">brew install python3 ansible
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo python3 -m pip install --upgrade pip
</span></span><span class="line"><span class="cl"><span class="nv">CFLAGS</span><span class="o">=</span>-Qunused-arguments <span class="nv">CPPFLAGS</span><span class="o">=</span>-Qunused-arguments python3 -m pip install --user ansible
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;======== Ansible Version Info ======== &#34;</span>
</span></span><span class="line"><span class="cl">ansible-galaxy --version
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="a-few-more-ansible-commands" class="headerLink">
    <a href="#a-few-more-ansible-commands" class="header-mark"></a>A Few More Ansible Commands</h3><table>
<thead>
<tr>
<th>Command</th>
<th>Code</th>
</tr>
</thead>
<tbody>
<tr>
<td>Run ansible playbook against a specific tag</td>
<td><code>ansible-playbook main.yml --inventory inventory --ask-become-pass -t 'ui'</code></td>
</tr>
<tr>
<td>Install requirements</td>
<td><code>ansible-galaxy collection install community.general &amp;&amp; ansible-galaxy install --role-file requirements.yml --force --ignore-errors</code></td>
</tr>
</tbody>
</table>
<h3 id="installing-go-task" class="headerLink">
    <a href="#installing-go-task" class="header-mark"></a>Installing go-task</h3><p>This tool is great for cross-platform shell scripting as it runs all the commands in the <code>Taskfile.yml</code> using a built in go shell library that supports bash syntax (and others).</p>
<p>Quickly get up and running using the directions here: <a href="https://github.com/go-task/task/blob/master/docs/installation.md" target="_blank" rel="noopener noreferrer">Install Task</a></p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Code</th>
</tr>
</thead>
<tbody>
<tr>
<td>Default Installation to local directory with debug logging enabled</td>
<td><code>sh -c &quot;$(curl -ssL https://taskfile.dev/install.sh)&quot; -- -d</code></td>
</tr>
<tr>
<td>Installation for user level access</td>
<td><code>sh -c &quot;$(curl -ssL https://taskfile.dev/install.sh)&quot; -- -d -b /usr/local/bin</code></td>
</tr>
</tbody>
</table>
<h3 id="installing-brew-packages" class="headerLink">
    <a href="#installing-brew-packages" class="header-mark"></a>Installing Brew Packages</h3><p>This eliminates any attempt to install if the package already exists.
For quick adhoc installs, this is useful.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/env bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># Minimize Homebrew updates for each run, making things faster</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">HOMEBREW_NO_AUTO_UPDATE</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># if linux install script, might want to include this: export PATH=&#34;/home/linuxbrew/.linuxbrew/bin:$PATH&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Example of installing with a tap</span>
</span></span><span class="line"><span class="cl">brew tap lucagrulla/tap
</span></span><span class="line"><span class="cl"><span class="nv">package</span><span class="o">=</span>cw
</span></span><span class="line"><span class="cl">brew list <span class="nv">$package</span> <span class="p">&amp;</span>&gt;/dev/null <span class="o">||</span> brew install <span class="nv">$package</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># git-delta needs an updated version, so make sure it&#39;s available</span>
</span></span><span class="line"><span class="cl"><span class="nv">package</span><span class="o">=</span>less
</span></span><span class="line"><span class="cl">brew list <span class="nv">$package</span> <span class="p">&amp;</span>&gt;/dev/null <span class="o">||</span> brew install <span class="nv">$package</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">package</span><span class="o">=</span>git-delta
</span></span><span class="line"><span class="cl">brew list <span class="nv">$package</span> <span class="p">&amp;</span>&gt;/dev/null <span class="o">||</span> brew install <span class="nv">$package</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="reduce-noise-with-progress-bar" class="headerLink">
    <a href="#reduce-noise-with-progress-bar" class="header-mark"></a>Reduce Noise With Progress Bar</h3><p>Use unzip with a progress bar to display progress, rather than the thousands of lines of output.
This is an example of installing the AWS CLI v2 in a Dockerfile, while not forcing the output of each line when unzipping.</p>
<p>This shows how to use the <code>pv</code> command line tool to help display progress in both a count fashion, and also by just using it as a timer.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">RUN apt-get -yqq update --fix-missing <span class="o">&amp;&amp;</span> apt-get -yqq install pv <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> mkdir -p ./tmpinstall <span class="o">&amp;&amp;</span> curl --silent <span class="s2">&#34;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&#34;</span> -o <span class="s2">&#34;./tmpinstall/awscliv2.zip&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="nv">COUNT</span><span class="o">=</span><span class="sb">`</span>unzip -q -l <span class="s2">&#34;./tmpinstall/awscliv2.zip&#34;</span> <span class="p">|</span> wc -l<span class="sb">`</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> mkdir -p ./tmpinstall/aws <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> unzip <span class="s2">&#34;./tmpinstall/awscliv2.zip&#34;</span> -d <span class="s2">&#34;./tmpinstall/&#34;</span>  <span class="p">|</span> pv -l -s <span class="nv">$COUNT</span> &gt;/dev/null <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> ./tmpinstall/aws/install --update <span class="p">|</span> <span class="o">(</span>pv --timer --name <span class="s2">&#34;🤖 awscli&#34;</span><span class="o">)</span>  <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf ./tmpinstall/ <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> apt-get clean -y <span class="o">&amp;&amp;</span> rm -rf /var/lib/apt/lists/* /tmp/library-scripts
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="check-for-and-install-tooling" class="headerLink">
    <a href="#check-for-and-install-tooling" class="header-mark"></a>Check for And Install Tooling</h3><p>This can help provide an example of how to double-check that some installed tools are available as part of a setup script.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">if</span> <span class="nb">command</span> -v ghq <span class="p">&amp;</span>&gt;/dev/null<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s1">&#39;✔️ ghq installed&#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    warning <span class="s2">&#34;❌ failed to find ghq, attempting to setup via source&#34;</span>
</span></span><span class="line"><span class="cl">    go install github.com/x-motemen/ghq@latest <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&#34;✅ installed ghq&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nb">command</span> -v gum <span class="p">&amp;</span>&gt;/dev/null<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s1">&#39;✔️ gum installed&#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    warning <span class="s2">&#34;❌ failed to find gum, attempting to setup via source&#34;</span>
</span></span><span class="line"><span class="cl">    go install github.com/charmbracelet/gum@latest <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&#34;✅ installed gum&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> ! <span class="nb">command</span> -v gum <span class="p">&amp;</span>/dev/null<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s1">&#39;might need go binaries on path, trying now..., try adding the line to your .zshrc&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span>go env GOPATH<span class="k">)</span><span class="s2">/bin:</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="conditional" class="headerLink">
    <a href="#conditional" class="header-mark"></a>Conditional</h2><p>Only Proceed If First Condition Returns Nothing</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">package</span><span class="o">=</span>cw
</span></span><span class="line"><span class="cl">brew list <span class="nv">$package</span> <span class="p">&amp;</span>&gt;/dev/null <span class="o">||</span> brew install <span class="nv">$package</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>On error do this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">test</span> -f nonexistentfile <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&#34;😢 boo. file does not exist&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>On success do the next command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">test</span> -f ~/.bashrc <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&#34;✅ congrats, you have a bashrc file&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="web-requests" class="headerLink">
    <a href="#web-requests" class="header-mark"></a>Web Requests</h2><h3 id="fetch-a-github-release" class="headerLink">
    <a href="#fetch-a-github-release" class="header-mark"></a>Fetch A GitHub Release</h3><p>This fetches the latest release from GitHub, parses the json, then moves it to the target path.
This release doesn&rsquo;t wrap in a tar file; it&rsquo;s just a binary.</p>
<p>This might fail due to anonymous API hits on GitHub API being rate-limited aggressively.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/env bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Grabbing latest release of fetch (a GitHub CLI for release downloads)&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">USER</span><span class="o">=</span>gruntwork-io
</span></span><span class="line"><span class="cl"><span class="nv">REPO</span><span class="o">=</span>fetch
</span></span><span class="line"><span class="cl"><span class="nv">TAG</span><span class="o">=</span>latest
</span></span><span class="line"><span class="cl"><span class="nv">ASSET</span><span class="o">=</span>fetch_linux_amd64
</span></span><span class="line"><span class="cl"><span class="nv">FILE</span><span class="o">=</span>fetch
</span></span><span class="line"><span class="cl">curl --silent <span class="s2">&#34;https://api.github.com/repos/</span><span class="nv">$USER</span><span class="s2">/</span><span class="nv">$REPO</span><span class="s2">/releases/latest&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="p">|</span> jq -r <span class="s2">&#34;.assets[] | select(.name | test(\&#34;</span><span class="si">${</span><span class="nv">ASSET</span><span class="si">}</span><span class="s2">\&#34;)) | .browser_download_url&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="p">|</span> wget -qi - --output-document<span class="o">=</span><span class="nv">$FILE</span> --progress<span class="o">=</span>bar:force
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Setting as executable and moving to /usr/local/bin&#34;</span>
</span></span><span class="line"><span class="cl">chmod +x <span class="nv">$FILE</span>
</span></span><span class="line"><span class="cl">sudo mv fetch /usr/local/bin
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Downloaded </span><span class="k">$(</span>fetch --version<span class="k">)</span><span class="s2"> successfully&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="fetch-a-github-release-that-requires-extraction" class="headerLink">
    <a href="#fetch-a-github-release-that-requires-extraction" class="header-mark"></a>Fetch a GitHub Release That Requires Extraction</h3><p>This is more of a Linux focused shell script example for grabbing a release and extracting the tar file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/env bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>sudo apt -qqy update
</span></span><span class="line"><span class="cl">sudo apt -qqy -o Dpkg::Progress-Fancy<span class="o">=</span><span class="nb">true</span> install wget
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">curl -s https://api.github.com/repos/GitTools/GitVersion/releases/latest <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="p">|</span> grep <span class="s2">&#34;browser_download_url.*gitversion\-debian.*\-x64.*\.tar\.gz&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="p">|</span> cut -d <span class="s2">&#34;:&#34;</span> -f 2,3 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="p">|</span> tr -d <span class="se">\&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="p">|</span> wget -qi -
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">tarball</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span>find . -name <span class="s2">&#34;gitversion-debian*.tar.gz&#34;</span><span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">tar -xzf <span class="nv">$tarball</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo chmod +x gitversion
</span></span><span class="line"><span class="cl">sudo mv gitversion /usr/local/bin
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo rm <span class="nv">$tarball</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;&gt;&gt;&gt;&gt; gitversion version: </span><span class="k">$(</span>~/gitversion /version<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Trying to install dotnet tools version&#34;</span>
</span></span><span class="line"><span class="cl">dotnet tool update --global GitVersion.Tool
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="concepts" class="headerLink">
    <a href="#concepts" class="header-mark"></a>Concepts</h2><h3 id="shebang" class="headerLink">
    <a href="#shebang" class="header-mark"></a>Shebang</h3><p>A common pattern is just <code>#!/bin/bash</code>.</p>
<p>To make your script more portable, by respecting the users&rsquo; env preferences try:</p>
<ul>
<li><code>#!/usr/bin/env bash</code></li>
<li><code>#!/usr/bin/env zsh</code></li>
<li><code>#!/usr/bin/env sh</code></li>
</ul>
<p>Some good info on this from <a href="https://bash.cyberciti.biz/guide/Shebang#.2Fusr.2Fbin.2Fenv_bash" target="_blank" rel="noopener noreferrer">Shebang</a></p>
<ul>
<li>If you do not specify an interpreter line, the default is usually the <code>/bin/sh</code></li>
<li>For a system boot script, use <code>/bin/sh</code></li>
<li>The <code>/usr/bin/env</code> run a program such as a bash in a modified environment. It makes your bash script portable. The advantage of #!/usr/bin/env bash is that it will use whatever bash executable appears first in the running user&rsquo;s <code>$PATH</code> variable.</li>
</ul>
<h2 id="ssh" class="headerLink">
    <a href="#ssh" class="header-mark"></a>SSH</h2><p>Setup your permissions for <code>~/.ssh</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Setting full user permissions for ~/.ssh&#34;</span>
</span></span><span class="line"><span class="cl">chmod -R u+rwX ~/.ssh
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Remove group access for ~/.ssh&#34;</span>
</span></span><span class="line"><span class="cl">chmod go-rwx ~/.ssh
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;now set any pem files to chmd 400 \$key to ensure read-only&#34;</span>
</span></span><span class="line"><span class="cl">chmod <span class="m">0600</span> ~/.ssh/id_rsa
</span></span></code></pre></td></tr></table>
</div>
</div><p>For why 0600 see footnote.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<div
    class="details admonition tip
      open
    "
  >
    <div class="details-summary admonition-title">
      <i
        class="icon fas fa-lightbulb fa-fw"
      ></i>
      Troubleshooting macOS permissions
      <i class="details-icon fas fa-angle-right fa-fw"></i>
    </div>
    <div class="details-content">
      <div class="admonition-content"><p>I&rsquo;ve had issues with macOS adding an <code>@</code> with ACL issues on the ssh key&rsquo;s when downloaded.</p>
<p>To resolve this, just copy the contents of the ssh key to a new file and remove the original.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cat original_key.pem &gt; key.pem
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://linuxize.com/post/how-to-list-users-in-linux/" target="_blank" rel="noopener noreferrer">How To List Users In Linux</a></p>
</div>
    </div>
  </div>
<h2 id="search-contents-of-a-file" class="headerLink">
    <a href="#search-contents-of-a-file" class="header-mark"></a>Search Contents of a File</h2><p>Using <code>ripgrep</code> you can search very quickly through file contents.</p>
<p>In this example, I&rsquo;m searching for a text string in a PowerShell file that VSCode wasn&rsquo;t able to find after 1-2 mins due to the size of the directory.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">rg -l -c <span class="s2">&#34;Start-ThreadJob&#34;</span> *.ps1
</span></span></code></pre></td></tr></table>
</div>
</div><div
    class="details admonition note
      open
    "
  >
    <div class="details-summary admonition-title">
      <i
        class="icon fas fa-pencil-alt fa-fw"
      ></i>
      Benchmark
      <i class="details-icon fas fa-angle-right fa-fw"></i>
    </div>
    <div class="details-content">
      <div class="admonition-content"><p>I ran a quick test to see how ripgrep performed compared to normal grep search.
Grep wasn&rsquo;t optimized, and by default is single threaded.
Ripgrep is multithreaded, automatically honors gitignore and more.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">grep -rnw <span class="nv">$HOME</span> -e <span class="s1">&#39;Start-ThreadJob&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th>Tool</th>
<th>Time</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ripgrep</code></td>
<td>5m6s</td>
</tr>
<tr>
<td><code>grep</code></td>
<td>1h+</td>
</tr>
</tbody>
</table></div>
    </div>
  </div>
<h2 id="using-yq-to-edit-yaml-files-for-datadog-service" class="headerLink">
    <a href="#using-yq-to-edit-yaml-files-for-datadog-service" class="header-mark"></a>Using yq to edit yaml files for Datadog service</h2><blockquote>
<p><a href="https://github.com/mikefarah/yq" target="_blank" rel="noopener noreferrer">GitHub - mikefarah/yq: yq is a portable command-line YAML processor</a></p>
</blockquote>
<p>I&rsquo;ve used yq to edit yaml files programmatically, such as datadog configuration files.</p>
<p>Here&rsquo;s a few samples on how to use this tool, using datadog agent config files as an example.</p>
<h3 id="quick-install-of-datadog-service" class="headerLink">
    <a href="#quick-install-of-datadog-service" class="header-mark"></a>Quick Install of Datadog Service</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">DD_HOST_TAGS</span><span class="o">=</span><span class="s2">&#34;type:custom-server,stage:dev&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">DD_HOSTNAME</span><span class="o">=</span><span class="s2">&#34;custom-server&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">DD_AGENT_MAJOR_VERSION</span><span class="o">=</span><span class="m">7</span> <span class="nv">DD_API_KEY</span><span class="o">=</span>FancyAPIKey <span class="nv">DD_SITE</span><span class="o">=</span><span class="s2">&#34;datadoghq.com&#34;</span> bash -c <span class="s2">&#34;</span><span class="k">$(</span>curl -L https://s3.amazonaws.com/dd-agent/scripts/install_script.sh<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">sudo chmod -R <span class="m">777</span> /etc/datadog-agent/
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="start-and-stop-the-datadog-services" class="headerLink">
    <a href="#start-and-stop-the-datadog-services" class="header-mark"></a>Start and stop the datadog services</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl stop datadog-agent
</span></span><span class="line"><span class="cl">sudo systemctl start datadog-agent
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="edit-default-datadog-config-file" class="headerLink">
    <a href="#edit-default-datadog-config-file" class="header-mark"></a>Edit Default Datadog Config File</h3><p>Next, configure the main configuration with custom tags and host name, including additional EC2 tags, metadata, and a custom tag to show the specific load test this is capturing.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">config</span><span class="o">=</span>/etc/datadog-agent/datadog.yaml
</span></span><span class="line"><span class="cl"><span class="nv">nametag</span><span class="o">=</span>mycustom-server
</span></span><span class="line"><span class="cl"><span class="nv">testname</span><span class="o">=</span>bigloadtest
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;set the basic config for app&#34;</span>
</span></span><span class="line"><span class="cl">yq <span class="nb">eval</span> <span class="s2">&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">.hostname = \&#34;</span><span class="nv">$nametag</span><span class="s2">\&#34; |
</span></span></span><span class="line"><span class="cl"><span class="s2">.process_config.enabled = true |
</span></span></span><span class="line"><span class="cl"><span class="s2">.tags = [\&#34;scope:loadtest\&#34;,\&#34;testname:</span><span class="nv">$testname</span><span class="s2">\&#34;] |
</span></span></span><span class="line"><span class="cl"><span class="s2">.env = \&#34;dev\&#34; |
</span></span></span><span class="line"><span class="cl"><span class="s2">.cloud_provider_metadata = [\&#34;aws\&#34;] |
</span></span></span><span class="line"><span class="cl"><span class="s2">.collect_ec2_tags = true&#34;</span> --inplace <span class="nv">$config</span>
</span></span><span class="line"><span class="cl">yq <span class="nb">eval</span> <span class="s2">&#34;.hostname, .process_config.enabled, .tags, .env, .cloud_provider_metadata ,.collect_ec2_tags&#34;</span> <span class="nv">$config</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="enable-datadog-network-monitoring" class="headerLink">
    <a href="#enable-datadog-network-monitoring" class="header-mark"></a>Enable Datadog Network Monitoring</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;set the process level config to search for ssh/sshd metrics&#34;</span>
</span></span><span class="line"><span class="cl">sudo cp /etc/datadog-agent/system-probe.yaml.example /etc/datadog-agent/system-probe.yaml
</span></span><span class="line"><span class="cl"><span class="nv">netconfig</span><span class="o">=</span>/etc/datadog-agent/system-probe.yaml
</span></span><span class="line"><span class="cl">yq <span class="nb">eval</span> <span class="s1">&#39;.network_config.enabled&#39;</span> <span class="nv">$netconfig</span>
</span></span><span class="line"><span class="cl">yq <span class="nb">eval</span> --inplace  <span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">.network_config.enabled = true
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;</span> <span class="nv">$netconfig</span>
</span></span><span class="line"><span class="cl">yq <span class="nb">eval</span> <span class="s1">&#39;.network_config.enabled&#39;</span> <span class="nv">$netconfig</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="enable-datadog-process-level-tracking" class="headerLink">
    <a href="#enable-datadog-process-level-tracking" class="header-mark"></a>Enable Datadog Process Level Tracking</h3><p>Enable process level tracking, with a specific match on <code>ssh, sshd</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;set the process level config to search for ssh/sshd metrics&#34;</span>
</span></span><span class="line"><span class="cl">sudo cp /etc/datadog-agent/conf.d/process.d/conf.yaml.example  /etc/datadog-agent/conf.d/process.d/conf.yaml
</span></span><span class="line"><span class="cl"><span class="nv">processconfig</span><span class="o">=</span>/etc/datadog-agent/conf.d/process.d/conf.yaml
</span></span><span class="line"><span class="cl">yq <span class="nb">eval</span> <span class="s1">&#39;.instances&#39;</span> <span class="nv">$processconfig</span>
</span></span><span class="line"><span class="cl">yq <span class="nb">eval</span> --inplace  <span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">.instances[0].name = &#34;ssh&#34; |
</span></span></span><span class="line"><span class="cl"><span class="s1">.instances[0].search_string = [&#34;ssh&#34;,&#34;sshd&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;</span> <span class="nv">$processconfig</span>
</span></span><span class="line"><span class="cl">yq <span class="nb">eval</span> --inplace  <span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">.instances[1].name = &#34;myprocess&#34; |
</span></span></span><span class="line"><span class="cl"><span class="s1">.instances[1].search_string = [&#34;myprocess&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;</span> <span class="nv">$processconfig</span>
</span></span><span class="line"><span class="cl">yq <span class="nb">eval</span> <span class="s1">&#39;.instances&#39;</span> <span class="nv">$processconfig</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can do a lot with <code>yq</code>.</p>
<h2 id="parse-kubernetes-secrets-using-jq" class="headerLink">
    <a href="#parse-kubernetes-secrets-using-jq" class="header-mark"></a>Parse Kubernetes Secrets Using JQ</h2><p>Using jq, you can parse out secrets from base64 encoded values for some quick scripting.</p>
<blockquote>
<p>NOTE: This uses <a href="https://github.com/abhimanyu003/sttr" target="_blank" rel="noopener noreferrer">sttr</a> but you can modify to whatever your platform provides (zsh <code>base64 -decode</code> or pwsh <code>[System.Convert]::FromBase64String($Base64String)</code>))
If you have Go installed then run <code>go install github.com/abhimanyu003/sttr@latest</code>.</p>
</blockquote>
<p>This example parses an encoded JSON string to help registry an Azure Container Registry from a Kubernetes stored secret.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">namespace</span><span class="o">=</span><span class="s2">&#34;mynamespace&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">secretname</span><span class="o">=</span><span class="s2">&#34;mysecretname&#34;</span>
</span></span><span class="line"><span class="cl">kubectl config set-context --current --namespace<span class="o">=</span><span class="nv">$namespace</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">configEncoded</span><span class="o">=</span><span class="k">$(</span>kubectl get secret <span class="nv">$secretname</span> -o <span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.\.dockerconfigjson}&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">configDecoded</span><span class="o">=</span><span class="k">$(</span>sttr base64-decode <span class="nv">$configEncoded</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">registry</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$configDecoded</span> <span class="p">|</span> jq -r <span class="s1">&#39;.auths | keys[0]&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">creds</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$configDecoded</span> <span class="p">|</span> jq -r .auths<span class="o">[</span><span class="nv">$registry</span><span class="o">]</span>.auth<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;👉 registry: </span><span class="nv">$registry</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;👉 username:password: </span><span class="k">$(</span> sttr base64-decode <span class="nv">$creds</span> <span class="k">)</span><span class="s2">&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="github-cli" class="headerLink">
    <a href="#github-cli" class="header-mark"></a>GitHub CLI</h2><h2 id="view-the-logs-of-a-prior-run" class="headerLink">
    <a href="#view-the-logs-of-a-prior-run" class="header-mark"></a>View The Logs Of A Prior Run</h2><p>View the logs of the last run (or toggle to error logs with the switch).</p>
<ul>
<li><code>gh run view --log $(gh run list -L1 --json 'databaseId' --jq '.[].DatabaseId')</code></li>
<li><code>gh run view $(gh run list --limit 1 --json databaseId --jq '.[0].DatabaseId' ) --log</code></li>
</ul>
<p>This can be chained together with other commands to quickly iterate on testing.
When appropriate, you might avoid this by running <a href="https://github.com/nektos/act" target="_blank" rel="noopener noreferrer">act</a> but I&rsquo;ve had limited success with it due to various restrictions.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git commit -am <span class="s1">&#39;ci: get GitHub release working&#39;</span> <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  git push <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  gh workflow run release <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  sleep <span class="m">5</span> <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  gh run watch -i1 <span class="o">||</span> gh run view --log --job <span class="k">$(</span>gh run list -L1 --json <span class="s1">&#39;workflowDatabaseId&#39;</span> --jq <span class="s1">&#39;.[].workflowDatabaseId&#39;</span><span class="k">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="use-to-configure-settings-on-many-repos-at-once" class="headerLink">
    <a href="#use-to-configure-settings-on-many-repos-at-once" class="header-mark"></a>Use To Configure Settings on Many Repos At Once</h3><p>This example uses [gum]<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup> to filter.
Use <code>tab</code> when selecting in the multi-entry option.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">org</span><span class="o">=</span><span class="k">$(</span>gum input --prompt <span class="s1">&#39;enter GitHub org: &#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">originallist</span><span class="o">=</span><span class="k">$(</span> gh repo list <span class="nv">$org</span> --json <span class="s1">&#39;name&#39;</span> --jq <span class="s1">&#39;.[].name&#39;</span> <span class="p">|</span>  tr <span class="s1">&#39; &#39;</span> <span class="s1">&#39;\n&#39;</span> <span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">repos</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span> <span class="nb">echo</span> <span class="nv">$originallist</span> <span class="p">|</span> gum filter --no-limit <span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> repo in <span class="k">$(</span> <span class="nb">echo</span> <span class="nv">$repos</span> <span class="p">|</span> tr <span class="s1">&#39;\n&#39;</span> <span class="s1">&#39; &#39;</span><span class="k">)</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">printf</span> <span class="s2">&#34;processing %s ... &#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">repo</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    gh api <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        --method PATCH <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        -H <span class="s2">&#34;Accept: application/vnd.github+json&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        /repos/<span class="nv">$org</span>/<span class="nv">$repo</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        -F <span class="nv">use_squash_pr_title_as_default</span><span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        -F <span class="nv">squash_merge_commit_title</span><span class="o">=</span>PR_TITLE <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        -F <span class="nv">squash_merge_commit_message</span><span class="o">=</span>PR_BODY <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        --silent
</span></span><span class="line"><span class="cl">        <span class="nb">printf</span> <span class="s2">&#34;✔️\n&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># return # for testing</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="clone-all-the-desired" class="headerLink">
    <a href="#clone-all-the-desired" class="header-mark"></a>Clone All The Desired</h2><p>Uses gum[^gum-repo] &amp; [ghq]<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>.
See <a href="#check-for-and-install-tooling" rel="">setup directions</a>.</p>
<h3 id="configure-ghq" class="headerLink">
    <a href="#configure-ghq" class="header-mark"></a>Configure ghq</h3><p>To configure <code>ghq</code> defaults run:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git config --global ghq.vcs git
</span></span><span class="line"><span class="cl">git config --global ghq.root <span class="k">$(</span>gum input -prompt <span class="s1">&#39;base git directory for repos: (recommend ~/git):  &#39;</span> <span class="k">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="clone-all-repos-selected" class="headerLink">
    <a href="#clone-all-repos-selected" class="header-mark"></a>Clone All Repos Selected</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">org</span><span class="o">=</span><span class="k">$(</span>gum input --prompt <span class="s1">&#39;enter GitHub org: &#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">originallist</span><span class="o">=</span><span class="k">$(</span> gh repo list <span class="nv">$org</span> --json <span class="s1">&#39;name&#39;</span> --jq <span class="s1">&#39;.[].name&#39;</span> <span class="p">|</span>  tr <span class="s1">&#39; &#39;</span> <span class="s1">&#39;\n&#39;</span> <span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;select repos (use tab to select, and type to filter)&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">repos</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span> <span class="nb">echo</span> <span class="nv">$originallist</span> <span class="p">|</span> gum filter --no-limit <span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> repo in <span class="k">$(</span> <span class="nb">echo</span> <span class="nv">$repos</span> <span class="p">|</span> tr <span class="s1">&#39;\n&#39;</span> <span class="s1">&#39; &#39;</span><span class="k">)</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">printf</span> <span class="s2">&#34;processing %s ... &#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">repo</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    ghq get <span class="s2">&#34;https://github.com/</span><span class="si">${</span><span class="nv">org</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">repo</span><span class="si">}</span><span class="s2">&#34;</span> <span class="p">&amp;</span>&gt; /dev/null
</span></span><span class="line"><span class="cl">    <span class="nb">printf</span> <span class="s2">&#34;✔️\n&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://www.reddit.com/r/linux4noobs/comments/bjpbnl/why_are_ssh_keys_600_and_not_400_by_default/" target="_blank" rel="noopener noreferrer">Why are ssh keys 600 and not 400 by default? authorized_keys immutable? : linux4noobs</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p><a href="https://github.com/charmbracelet/gum" target="_blank" rel="noopener noreferrer">GitHub - charmbracelet/gum: A tool for glamorous shell scripts 🎀</a>&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p><a href="https://github.com/x-motemen/ghq" target="_blank" rel="noopener noreferrer">ghq - repo cloning tool</a>&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
</div><div id="comments">







<div class="webmentions" id="webmentions" style="width:90% !important;">
  
  
  
  
  

  
  
  
  

  <br>

  
  
    
    
    
    
  
  <h3>Webmentions</h3>


  
  <p class="ctr">(No webmentions yet.)</p>

  
</div>


<script
  src="https://giscus.app/client.js"
  data-repo="sheldonhull/sheldonhull.hugo"
  data-repo-id="MDEwOlJlcG9zaXRvcnkxNzcyMzY0MTk="
  data-category="blog"
  data-category-id="DIC_kwDOCpBpw84B-j5B"
  data-mapping="og:title"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-theme="transparent_dark"
  crossorigin="anonymous"
  async
></script>

          <noscript>
                Please enable JavaScript to view the comments powered by <a href="https://utteranc.es/">Utterances</a>.
          </noscript></div>
</div></div></div>
            </main><footer class="footer">
    <div class="footer-container"><div class="footer-line">
        </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2013 -2025</span><span class="author" itemprop="copyrightHolder"
            >&nbsp;<a
              href="/"
              target="_blank"
              rel="noopener noreferrer"
              ></a
            ></span
          >&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreferrer" href="https://www.sheldonhull.com/license" target="_blank">CC BY-NC 4.0</a></span></div>
    </div>
      <br />
      <div style="display: flex; justify-content: center;">
        <img src="https://api.netlify.com/api/v1/badges/cc815d05-9008-4078-8e4f-bad42eb3281a/deploy-status" alt="Deployment status" />
      </div>
      <br /><div id="subscribe-footer">
  <form
    action="https://embed.mailbrew.com/api/form_subscribe"
    method="get"
    style="width: 100%; max-width: 340px; color: #dcdcdc; background: #090909; padding: 10px; border-radius: 7px"
    id="mailbrew-embed-form"
  >
    <a
      href="https://app.mailbrew.com/sheldonhull?aff=sheldonhull"
      target="_blank"
      rel="noopener noreferrer"
      style="display: flex; width: 100%; align-items: center; margin-bottom: 6px"
    >
      <img
        src="https://www.gravatar.com/avatar/b909e5a82474e9853ff6a6c6111cf0cf?s=100&amp;d=404&amp;r=g"
        style="width: 22px; height: 22px; border-radius: 22px; margin-right: 6px"
      />
      <span style="font-weight: 500; flex: 1 1 auto; min-width: 0">
        Sheldon Hull
      </span>
    </a>
    <p style="opacity: 0.75; margin-bottom: 4px">
      ⚡ A curated newsletter of my writing and other interesting posts. Mostly
      tech focused.
    </p>
    <div style="display: flex; width: 100%; margin-top: 12px">
      <input
        type="email"
        style="
        height: 32px;
        font-size: 14.5px;
        border-radius: 6px;
        appearance: none;
        padding: 0 8px;
        border: 1px solid rgba(120, 120, 120, 0.3);
        margin-right: 6px;
        flex: 1;
      "
        id="email"
        name="email"
        placeholder="Your email"
        value=""
      />
      <input type="hidden" name="id" value="Ce52fHROTfCr" />
      <button
        type="submit"
        style="
        height: 32px;
        font-size: 14.5px;
        border-radius: 6px;
        appearance: none;
        padding: 0 16px;
        border: none;
        flex: 0 0 auto;
        font-weight: 500;
        cursor: pointer;
        background: #f51616;
        color: white;
      "
      >
        Subscribe
      </button>
    </div>
    <p
      id="mailbrew-success-message"
      style="font-size: 13px; margin-top: 5px; color: green"
    ></p>
    <p
      id="mailbrew-error-message"
      style="font-size: 13px; margin-top: 5px; color: red"
    ></p>
    <a
      href="https://mailbrew.com/?ref=brew-embed&aff=sheldonhull"
      target="_blank"
      rel="noopener noreferrer"
      style="display: block; font-size: 13px; margin-top: 8px; color: rgba(220, 220, 220, 0.6)"
    >
      Made with
      <img
        src="https://www.sheldonhull.com/images/mailbrew-embed-logo.png"
        width="18px"
        height="18px"
        style="margin-bottom: -4px; margin-right: 2px"
      />
      Mailbrew
    </a>
  </form>
</div>
<br /><div>
  <a href="https://www.buymeacoffee.com/KO1AFL2gX" target="_blank">
    <img
      src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png"
      alt="Buy Me A Coffee"
      style="display: inline-block; text-align:center; height: 60px !important;width: 217px !important;"
    />
  </a>
</div>
</div>
  </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><div class="assets"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway&amp;display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material&#43;Icons&amp;display=swap"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{},"data":{"desktop-header-typeit":"sheldonhull.com","mobile-header-typeit":"sheldonhull.com"},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"algoliaAppID":"04HSGXXQD5","algoliaIndex":"sheldonhull.com","algoliaSearchKey":"a7ec2763a5d966a5b9f8d70b254bfb68","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"desktop-header-typeit":["desktop-header-typeit"],"mobile-header-typeit":["mobile-header-typeit"]},"duration":-1,"speed":100}};</script><script
    src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"
    
  ></script><script
    src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"
    
  ></script><script
    src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"
    
  ></script><script
    src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"
    
  ></script><script
    src="https://cdn.jsdelivr.net/npm/typeit@7.0.4/dist/typeit.min.js"
    
  ></script><script
    src="/js/sidebar.js"
    
  ></script><script
    src="/js/webmentions.js"
    
  ></script><script src="/js/mailbrew-html-embed-script.js" async></script><script src="//cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/timeago.js/4.0.2/timeago.min.js"></script><script
    src="/js/theme.min.js"
    
      defer
    
  ></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'UA-40198001-3', { 'anonymize_ip': true });
        </script><script
    src="https://www.googletagmanager.com/gtag/js?id=UA-40198001-3"
    async
  ></script></div>

    </body>
</html>