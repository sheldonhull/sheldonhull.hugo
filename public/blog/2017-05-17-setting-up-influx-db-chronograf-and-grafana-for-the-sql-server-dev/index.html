<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">

<meta itemprop="name" content="Setting Up InfluxDb, Chronograf, and Grafana for the SqlServer Dev">
<meta itemprop="description" content="Other Posts in Series  Running InfluxDb As A Service in Windows Setting Up InfluxDb, Chronograf, and Grafana for the SqlServer Dev InfluxDB And Annotations Capturing Perfmon Counters With Telegraf  There are some beautiful ways to visualize time series data with the tools I&rsquo;m going to go over. This post is purely focused on the initial setup and saving you some time there. In a future post, I&rsquo;ll show how some of these tools can help you visualize your server performance in a powerful way, including taking metrics from multiple types of servers that be working with SQL Server, and combining the metrics when appropriate to give a full picture of performance.">


<meta itemprop="datePublished" content="2017-05-17T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2017-05-17T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="743">



<meta itemprop="keywords" content="sql-server,influxdb,performance-tuning,tech,powershell,cool-tools," />
<meta property="og:title" content="Setting Up InfluxDb, Chronograf, and Grafana for the SqlServer Dev" />
<meta property="og:description" content="Other Posts in Series  Running InfluxDb As A Service in Windows Setting Up InfluxDb, Chronograf, and Grafana for the SqlServer Dev InfluxDB And Annotations Capturing Perfmon Counters With Telegraf  There are some beautiful ways to visualize time series data with the tools I&rsquo;m going to go over. This post is purely focused on the initial setup and saving you some time there. In a future post, I&rsquo;ll show how some of these tools can help you visualize your server performance in a powerful way, including taking metrics from multiple types of servers that be working with SQL Server, and combining the metrics when appropriate to give a full picture of performance." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sheldonhull.com/blog/2017-05-17-setting-up-influx-db-chronograf-and-grafana-for-the-sql-server-dev/" />
<meta property="article:published_time" content="2017-05-17T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2017-05-17T00:00:00&#43;00:00"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Setting Up InfluxDb, Chronograf, and Grafana for the SqlServer Dev"/>
<meta name="twitter:description" content="Other Posts in Series  Running InfluxDb As A Service in Windows Setting Up InfluxDb, Chronograf, and Grafana for the SqlServer Dev InfluxDB And Annotations Capturing Perfmon Counters With Telegraf  There are some beautiful ways to visualize time series data with the tools I&rsquo;m going to go over. This post is purely focused on the initial setup and saving you some time there. In a future post, I&rsquo;ll show how some of these tools can help you visualize your server performance in a powerful way, including taking metrics from multiple types of servers that be working with SQL Server, and combining the metrics when appropriate to give a full picture of performance."/>

	<link rel="apple-touch-icon" sizes="180x180" href="https://www.sheldonhull.com/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="https://www.sheldonhull.com/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="https://www.sheldonhull.com/favicon-16x16.png">
	<link rel="manifest" href="https://www.sheldonhull.com/site.webmanifest">
	<link rel="mask-icon" href="https://www.sheldonhull.com/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="https://www.sheldonhull.com/favicon.ico">

	<title>Setting Up InfluxDb, Chronograf, and Grafana for the SqlServer Dev</title>
	<link rel="stylesheet" href="https://www.sheldonhull.com/css/style.min.31706917653d2b9e8410abd431f30ec4359a88a94fc87a63654779d87329edec.css" integrity="sha256-MXBpF2U9K56EEKvUMfMOxDWaiKlPyHpjZUd52HMp7ew=">
	
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp faster">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://www.sheldonhull.com">sheldonhull.com</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					<a href="https://www.sheldonhull.com/blog/">Blog</a>
					<a href="https://www.sheldonhull.com/docs/">Docs</a>
					<a href="https://www.sheldonhull.com/tags/">Tags</a>
					<a href="https://www.sheldonhull.com/about/">About</a>
				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<button id="toc-btn" class="hdr-btn desktop-only-ib" title="Table of Contents"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3" y2="6"></line><line x1="3" y1="12" x2="3" y2="12"></line><line x1="3" y1="18" x2="3" y2="18"></line></svg></button><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://www.sheldonhull.com/blog/">Blog</a></li>
			<li><a href="https://www.sheldonhull.com/docs/">Docs</a></li>
			<li><a href="https://www.sheldonhull.com/tags/">Tags</a></li>
			<li><a href="https://www.sheldonhull.com/about/">About</a></li>
		</ul>
	</div>


	<main class="site-main section-inner thin animated fadeIn faster">
		<h1>Setting Up InfluxDb, Chronograf, and Grafana for the SqlServer Dev</h1>
		<div class="content">
			

<h2 id="other-posts-in-series">Other Posts in Series<a href="#other-posts-in-series" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>

<ul>
<li><a href="{% post_url 2017-05-24-running-influx-db-as-a-service-in-windows  %}">Running InfluxDb As A Service in Windows</a></li>
<li><strong><a href="{% post_url 2017-05-17-setting-up-influx-db-chronograf-and-grafana-for-the-sql-server-dev %}">Setting Up InfluxDb, Chronograf, and Grafana for the SqlServer Dev</a></strong></li>
<li><a href="{% post_url 2017-08-07-influx-db-and-annotations %}">InfluxDB And Annotations</a></li>
<li><a href="{% post_url 2017-08-08-capturing-perfmon-counters-with-telegraf %}">Capturing Perfmon Counters With Telegraf</a></li>
</ul>

<p>There are some beautiful ways to visualize time series data with the tools I&rsquo;m going to go over. This post is purely focused on the initial setup and saving you some time there. In a future post, I&rsquo;ll show how some of these tools can help you visualize your server performance in a powerful way, including taking metrics from multiple types of servers that be working with SQL Server, and combining the metrics when appropriate to give a full picture of performance.</p>

<p><img src="https://www.sheldonhull.com/assets/img/grafana_visualization.png" alt="A beautiful way to visualize performance across a variety of machines" /> A beautiful way to visualize performance across a variety of machines</p>

<p>It&rsquo;s pretty epic to combine information across a variety of sources and be able to relate the metrics to the &ldquo;big picture&rdquo; that individual machine monitoring might fail to shed light on.</p>

<h2 id="downloading">Downloading<a href="#downloading" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>

<p>I started by running this quick powershell script to download the stable toolkit.
<script type="text/javascript" src="https://gist.github.com/5fa33704e2599e3ddb46a8299ad3bafe.js"></script>
</p>

<p>Once extracted, I moved the influx extracted subfolder into the InfluxDB folder to keep it clean. Now all the binaries rested in <code>C:\Influx\InfluxDB</code> folder with no nesting folders.
I referenced the documentation for getting started with InfluxDB.</p>

<h2 id="setup-local-influxdb">Setup Local InfluxDb<a href="#setup-local-influxdb" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>

<p>Started up the local influxdb binary.</p>

<script type="text/javascript" src="https://gist.github.com/6f4e11d60244af00edac438cb9ae6ea5.js"></script>


<p>Initializing the new database was simple as documented: <code>create database statty</code></p>

<blockquote>
<p>warning &ldquo;Case Sensitivity&rdquo;
InfluxDB is case sensitive. Make sure to check your case if something isn&rsquo;t working, such as use &ldquo;DatabaseName&rdquo; instead of use &ldquo;databasename&rdquo;</p>
</blockquote>

<p>Also, if you get an error with access to the file, try running as admin.</p>

<p><img src="https://www.sheldonhull.com/assets/img/Influx+Command+Line+Error+on+writing+history+file.png" alt="Influx+Command+Line+Error+on+writing+history+file" /></p>

<h2 id="more-enviromental-variable-fun">More Enviromental Variable Fun<a href="#more-enviromental-variable-fun" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>

<p>A simple fix to errors related to paths and the HOME variable these tools often need, per a Github issue, was to ensure the current path was available as a variable. I did this quickly with a simple batch file to launch the consoles as well as one option, as well as updated the Start-Process script to include a statement to set the env variable for the processes being started. This eliminated the issue. For more details see <a href="http://bit.ly/2nJib1P">github issues</a></p>
<div class="highlight"><pre class="chroma"><code class="language-batch" data-lang="batch"><span class="k">SET</span> <span class="nv">HOME</span><span class="p">=</span><span class="nv">%~dp0</span>
<span class="k">start</span> influxd.exe
<span class="k">start</span> influx.exe</code></pre></div>
<p>An additional snippet for launching the console version via a bat file:</p>
<div class="highlight"><pre class="chroma"><code class="language-batch" data-lang="batch"><span class="k">set</span> <span class="nv">HOME</span><span class="p">=</span>C<span class="p">:</span><span class="nl">\influx</span>
cmd /k influx.exe -host <span class="s2">&#34;MyInfluxDbHost&#34;</span> -database <span class="s2">&#34;statty&#34;</span> -precision <span class="s2">&#34;s&#34;</span> -format column</code></pre></div>
<h2 id="quick-start-for-telegraf">Quick Start for Telegraf<a href="#quick-start-for-telegraf" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>

<p>Once you have this running you can take the telegraf binaries and run them on any other server to start capturing some default preset metrics. I launched with the following script and placed this in <code>C:\Influx</code> directory to make it easy to access for future runs.</p>

<script type="text/javascript" src="https://gist.github.com/1a9641ce607569dde912f996137debae.js"></script>


<p>Edit the conf file to add some tags, change default sampling interval and more. I&rsquo;ll post another article about setting up telegraf to run as a service in the future so search for more info</p>

<p>You can also apply the same bat file in the startup directory such as:</p>
<div class="highlight"><pre class="chroma"><code class="language-batch" data-lang="batch"><span class="p">@</span><span class="c1">REM alternative is using variable</span>
<span class="p">@</span><span class="c1">REM set TELEGRAF_CONFIG_PATH=C:\telegraf\telegraf.conf</span>

<span class="k">start</span> <span class="nv">%~dp0</span>telegraf.exe -config <span class="nv">%~dp0</span>telegraf.conf</code></pre></div>
<h2 id="run-chronograf">Run Chronograf<a href="#run-chronograf" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>

<p>One these metrics began to run, I ran Chronograf. This is Influx&rsquo;s alternative to Grafana, another more mature product.</p>

<script type="text/javascript" src="https://gist.github.com/958094675f6ab53897616755dd130144.js"></script>


<p><img src="https://www.sheldonhull.com/assets/img/Initial+Screen+After+Opening+Localhost+when+running+the+Chronograf.exe" alt="" /></p>

<p>Upon loading and opening up the instance monitor, I found immediately that I was able to get some metrics from the defaults.</p>

<p><img src="https://www.sheldonhull.com/assets/img/Defaults+-+Nice+Start.png" alt="Defaults+-+Nice+Start" /></p>

<h2 id="get-grafana">Get Grafana<a href="#get-grafana" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>

<p>My preferred visualization tool, this was far more robust and well documented than Chronograf which has promise, but is a relatively new project.</p>

<p>When starting Grafana, you can run the following script. It creates a copy of the default ini to copy for the user to edit if not already there.</p>

<script type="text/javascript" src="https://gist.github.com/3cff34cf9029bd99cd1e888e755c307c.js"></script>


<p>Once you open the localhost page, if you don&rsquo;t see datasources in the left hand drop down, create an organization and ensure you are an admin, you&rsquo;ll then see the option to add datasources. I simple pointed the page to InfluxDB console running on the server I had setup previously.</p>

<h2 id="summary">summary<a href="#summary" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>

<p>This is just a quick guide on getting started as I found a lot of little bumps in the road since the projects are written in <code>GO</code> and not an easily run .NET project. Getting through this will hopefully give you a way to get started. I&rsquo;ll blog a bit more soon on visualization of the metrics captured, some custom annotations to help make metrics come alive with real-time event notifications (like &ldquo;load test started&rdquo; and &ldquo;build ended&rdquo; etc). It&rsquo;s a really promising solution for those who want some really nice flexibility in using perfmon and related metrics to visualize Windows and SQL Server performance.</p>

		</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2019 <a href="https://www.sheldonhull.com"></a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://www.sheldonhull.com/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>


	<script src="https://www.sheldonhull.com/js/main.min.784417f5847151f848c339cf0acb13a06cbb648b1483435a28ed4556c4ead69b.js" integrity="sha256-eEQX9YRxUfhIwznPCssToGy7ZIsUg0NaKO1FVsTq1ps="></script>

</body>

</html>
